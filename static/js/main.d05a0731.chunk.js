(this["webpackJsonpgrocery-list"]=this["webpackJsonpgrocery-list"]||[]).push([[0],{26:function(e,t,c){},36:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),r=c(19),i=c.n(r),a=(c(26),c(4)),l=c(10),o=c(2),d=c(3),u=c(1);var j=function(e){var t=e.children,c=e.clickHandler,n=e.type,s=c||function(){return console.log("button was clicked")},r="flex items-start px-2 py-2 font-semibold border rounded-sm shadow-sm";switch(void 0===n?"default":n){case"success":r+=" bg-green-500 border-green-600 text-gray-800";break;case"error":r+=" bg-red-500 border-red-600 text-gray-200";break;case"primary":r+=" bg-blue-500 border-blue-600 text-gray-200"}return Object(u.jsx)("button",{className:r,onClick:s,children:null!==t&&void 0!==t?t:"Click"})},b=function(e,t){Object(n.useEffect)((function(){function c(c){e.current&&!e.current.contains(c.target)&&t()}return document.addEventListener("mousedown",c),function(){document.removeEventListener("mousedown",c)}}),[e,t])};var m=function(e){var t=e.children,c=e.modalTitle,s=void 0===c?"Modal Title":c,r=e.closeHandler,i=Object(n.useRef)(null);return b(i,r),Object(u.jsx)("div",{className:"absolute top-0 right-0 bottom-0 left-0 pt-10",style:{backgroundColor:"rgba(0,0,0,.4"},children:Object(u.jsxs)("div",{ref:i,className:"bg-gray-300 w-5/6 mx-auto py-2 px-3 shadow-lg rounded-sm border-gray-400 border",children:[Object(u.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[Object(u.jsx)("p",{className:"font-bold",children:s}),Object(u.jsx)(d.h,{className:"w-5",onClick:function(){return r()}})]}),t]})})};var f=function(e){var t=e.closeHandler,c=e.addListHandler,s=Object(n.useState)(""),r=Object(a.a)(s,2),i=r[0],l=r[1],o=Object(n.useState)(""),d=Object(a.a)(o,2),b=d[0],f=d[1];function O(e){e.preventDefault(),i?(c(i),t()):f("Please enter a name")}var x=Object(n.useRef)(null);return Object(n.useEffect)((function(){x.current.focus()}),[]),Object(u.jsxs)(m,{closeHandler:t,modalTitle:"Start new list",children:[b&&Object(u.jsx)("div",{className:"px-2 py-1 mb-2 text-gray-50 bg-red-400",children:b}),Object(u.jsxs)("form",{onSubmit:O,children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"list_name",children:"List Name: "}),Object(u.jsx)("input",{ref:x,id:"list_name",defaultValue:i,onChange:function(e){return l(e.target.value)},className:"border border-gray-400 p-1 rounded-sm",type:"text"})]}),Object(u.jsx)("div",{className:"flex justify-end mt-6",children:Object(u.jsx)(j,{type:"success",clickHandler:O,children:"Start List"})})]})]})};var O=function(e){var t=e.lists,c=e.deleteListHandler;return Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{className:"font-bold text-lg mt-4",children:t.length>0?"Current Lists":"No Lists Yet"}),t.map((function(e,t){return Object(u.jsxs)("div",{className:"flex justify-between items-center px-1 mb-8",children:[Object(u.jsx)("p",{children:e.name}),Object(u.jsxs)("div",{className:"flex space-x-2",children:[Object(u.jsx)(j,{type:"error",clickHandler:function(){return c(e.id)},children:Object(u.jsx)(d.g,{className:"w-6"})}),Object(u.jsx)(l.b,{to:"/lists/".concat(e.id),children:Object(u.jsx)(j,{type:"primary",clickHandler:null,children:Object(u.jsx)(d.c,{className:"w-6"})})}),Object(u.jsx)(l.b,{to:"/lists/shop/".concat(e.id),children:Object(u.jsx)(j,{type:"success",clickHandler:null,children:Object(u.jsx)(d.f,{className:"w-6"})})})]})]},"glist_".concat(t))}))]})},x=c(12);var h=function(e){var t,c,s=e.listCategories,r=e.listId,i=e.listItem,l=e.deleteHandler,o=e.updateHandler,b=Object(n.useState)(null!==(t=i.item)&&void 0!==t?t:""),m=Object(a.a)(b,2),f=m[0],O=m[1],x=Object(n.useState)(null!==(c=i.category)&&void 0!==c?c:"Miscellaneous"),h=Object(a.a)(x,2),g=h[0],v=h[1];return Object(u.jsxs)("div",{className:"flex flex-col mb-2 item-row",children:[Object(u.jsx)("div",{className:"flex mb-2",children:Object(u.jsxs)("div",{className:"w-full",children:[Object(u.jsx)("label",{className:"font-bold",htmlFor:"item_".concat(i.id),children:"Item: "}),Object(u.jsx)("input",{id:"item_".concat(i.id),defaultValue:f,onChange:function(e){return t=e.target.value,O(t),void o(r,{id:i.id,item:t,category:g});var t},className:"border border-gray-400 p-1 mt-1 rounded-sm w-full",type:"text"})]})}),Object(u.jsxs)("div",{className:"flex justify-between space-x-2",children:[Object(u.jsx)("div",{className:"text-sm",children:Object(u.jsx)("select",{name:"category_".concat(i.id),id:"category_".concat(i.id),className:"border bg-gray-100 border-gray-400 p-1 mt-1 rounded-sm",onChange:function(e){return t=e.target.value,v(t),void o(r,{id:i.id,item:f,category:t});var t},value:g,children:s.map((function(e,t){return Object(u.jsx)("option",{value:e,children:e},"".concat(e,"_").concat(t))}))})}),Object(u.jsx)(j,{type:"error",clickHandler:function(){return l(i.id)},children:Object(u.jsx)(d.g,{className:"w-5"})})]})]})},g=c(9),v=function(){return Object.keys(localStorage).filter((function(e){return e.includes("list_")})).map((function(e){return JSON.parse(localStorage.getItem(e))})).sort((function(e,t){return e.id-t.id}))},p=function(e){return JSON.parse(localStorage.getItem("list_".concat(e)))},y=function(e,t){var c=p(e),n=Object(g.a)(Object(g.a)({},c),t);return n.name=t.name||c.name,n.items=t.items||c.items,localStorage.setItem("list_".concat(c.id),JSON.stringify(n)),n},N={addList:function(e){var t=v(),c=1;t.length>0&&(c=t.map((function(e){return e.id})).sort().splice(-1,1)[0]+1);var n={id:c,name:e,items:[],categories:["Dairy","Dry/Can Goods","Pantry","Produce","Meat","Miscellaneous"]};return localStorage.setItem("list_".concat(c),JSON.stringify(n)),v()},getLists:v,getList:p,removeListItem:function(e,t){var c=p(e),n=Object(x.a)(c.items);return c.items=n.filter((function(e){return e.id!==t})),y(e,Object(g.a)({},c))},addNewListItem:function(e){var t=p(e),c=Object(x.a)(t.items);return c.push({id:c.length+1,item:"",acquired:!1,category:"Miscellaneous"}),t.items=c,y(e,Object(g.a)({},t))},updateListItem:function(e,t){var c=p(e),n=Object(x.a)(c.items),s=n.findIndex((function(e){return e.id===t.id}));return n[s]=Object(g.a)(Object(g.a)({},n[s]),t),c.items=n,localStorage.setItem("list_".concat(c.id),JSON.stringify(c)),c},updateList:y,clearLists:function(){localStorage.clear()},removeList:function(e){return localStorage.removeItem("list_".concat(e)),v()}};var w=function(){var e=Object(o.f)().id,t=Object(n.useState)(N.getList(e)),c=Object(a.a)(t,2),s=c[0],r=c[1],i=Object(n.useState)([]),b=Object(a.a)(i,2),m=b[0],f=b[1],O=Object(n.useState)([]),g=Object(a.a)(O,2),v=g[0],p=g[1];if(Object(n.useEffect)((function(){s&&(f(Object(x.a)(s.items)),p(Object(x.a)(s.categories)))}),[s]),Object(n.useEffect)((function(){m.length>1&&document.querySelector(".item-row:last-child").scrollIntoView({behavior:"smooth"})}),[m]),!s)return null;function y(t){var c=N.removeListItem(e,t);r(c),f(c.items)}function w(e,t){var c=N.updateListItem(e,t);r(c),f(c.items)}return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"flex items-center",children:[Object(u.jsx)("div",{className:"w-1/6",children:Object(u.jsx)(l.b,{to:"/",children:Object(u.jsx)(d.b,{className:"w-6"})})}),Object(u.jsx)("p",{className:"font-bold text-xl flex-1",children:s.name})]}),Object(u.jsxs)("div",{className:"flex flex-col mt-5 mb-12 item-list",children:[0===m.length&&Object(u.jsx)("p",{className:"mt-5",children:"No items yet."}),m.map((function(t,c){return Object(u.jsx)(h,{listCategories:v,listId:e,updateHandler:w,deleteHandler:y,listItem:t},"list_item_".concat(c))}))]}),Object(u.jsxs)("div",{className:"flex mt-8 justify-between fixed bottom-2 right-2 left-2",children:[Object(u.jsx)(j,{type:"primary",clickHandler:function(){document.body.scrollIntoView({behavior:"smooth"})},children:Object(u.jsx)(d.a,{className:"w-5"})}),Object(u.jsxs)(j,{type:"success",clickHandler:function(){var t=N.addNewListItem(e);r(t),f(t.items)},children:[Object(u.jsx)(d.d,{className:"w-5"})," Add Item"]})]})]})};var S=function(e){var t,c=e.listId,s=e.listItem,r=e.updateHandler,i=Object(n.useState)(null!==s&&void 0!==s?s:""),l=Object(a.a)(i,2),o=l[0],b=l[1],m=Object(n.useState)(null!==(t=o.acquired)&&void 0!==t&&t),f=Object(a.a)(m,2),O=f[0],x=f[1];return Object(u.jsxs)("div",{className:"flex items-center space-x-3 mb-4",style:{textDecoration:O?"line-through":null},children:[Object(u.jsx)(j,{type:"primary",clickHandler:function(){return function(){var e=!O;x(e),b(Object(g.a)(Object(g.a)({},o),{},{acquired:e})),r(c,{id:s.id,acquired:e})}()},children:Object(u.jsx)(d.e,{className:"w-4"})}),Object(u.jsxs)("p",{children:[o.quantity," ",o.item]})]})};var L=function(){var e=Object(o.f)().id,t=Object(n.useState)(N.getList(e)),c=Object(a.a)(t,2),s=c[0],r=c[1],i=Object(n.useState)([]),j=Object(a.a)(i,2),b=j[0],m=j[1],f=Object(n.useState)("all"),O=Object(a.a)(f,2),x=O[0],h=O[1];Object(n.useEffect)((function(){s&&p(s)}),[s]);var g=s.categories;function v(e,t){var c=N.updateListItem(e,t);r(c),p(c)}function p(e){var t=e.categories.map((function(t){return{category:t,items:e.items.filter((function(e){return e.category===t}))}}));m(t)}return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"flex items-center",children:[Object(u.jsx)("div",{className:"w-1/6",children:Object(u.jsx)(l.b,{to:"/",children:Object(u.jsx)(d.b,{className:"w-6"})})}),Object(u.jsxs)("p",{className:"font-bold text-xl w-5/6",children:["Shopping ",s.name]})]}),Object(u.jsxs)("div",{className:"flex mt-4",children:[Object(u.jsx)("label",{className:"pr-2 font-bold",htmlFor:"categories",children:"Filter:"}),Object(u.jsxs)("select",{className:"bg-gray-200 shadow-sm py-1 pl-1",name:"categories",id:"categories",value:x,onChange:function(e){return h(e.target.value)},children:[Object(u.jsx)("option",{value:"all",children:"All"}),g.map((function(e,t){return Object(u.jsx)("option",{value:e,children:e},"category_".concat(t))}))]})]}),Object(u.jsxs)("div",{className:"flex flex-col mb-12 item-list",children:[0===b.length&&Object(u.jsx)("p",{className:"mt-5",children:"No items yet."}),b.map((function(t,c){return Object(u.jsxs)("div",{className:"pb-6 ".concat(t.category===x||"all"===x?"flex flex-col":"hidden"),children:[Object(u.jsx)("p",{className:"font-bold text-right",children:t.category}),Object(u.jsx)("hr",{className:"border-gray-400 mb-2"}),t.items.map((function(t,c){return Object(u.jsx)(S,{listId:e,updateHandler:v,listItem:t},"list_item_".concat(c))}))]},"list_category_".concat(c))}))]})]})};var k=function(){var e=Object(n.useState)(!1),t=Object(a.a)(e,2),c=t[0],s=t[1],r=N.getLists(),i=Object(n.useState)(r),b=Object(a.a)(i,2),m=b[0],x=b[1];return Object(u.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-300",children:[Object(u.jsx)("header",{className:"w-full bg-gray-500 text-gray-50 py-3 px-2 h-12",children:Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsx)(d.f,{className:"w-5 mr-1"}),"Grocery List App"]})}),Object(u.jsx)("main",{className:"my-2 px-2 flex-1",children:Object(u.jsx)(l.a,{children:Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{exact:!0,path:"/lists/:id",children:Object(u.jsx)(w,{})}),Object(u.jsx)(o.a,{exact:!0,path:"/lists/shop/:id",children:Object(u.jsx)(L,{})}),Object(u.jsxs)(o.a,{path:"/",children:[Object(u.jsxs)("div",{className:"flex justify-between",children:[Object(u.jsxs)(j,{type:"success",clickHandler:function(){return s(!0)},children:[Object(u.jsx)(d.d,{className:"w-5"})," Create list"]}),Object(u.jsxs)(j,{type:"error",clickHandler:function(){return N.clearLists(),void x([])},children:[Object(u.jsx)(d.g,{className:"w-5"})," Clear All"]})]}),Object(u.jsx)(O,{lists:m,deleteListHandler:function(e){var t=N.removeList(e);x(t)}})]})]})})}),c&&Object(u.jsx)(f,{closeHandler:function(){return s(!1)},addListHandler:function(e){var t=N.addList(e);x(t)}})]})},I=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,37)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),n(e),s(e),r(e),i(e)}))},H=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function _(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var c=e.installing;null!=c&&(c.onstatechange=function(){"installed"===c.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(k,{})}),document.getElementById("root")),I(),function(e){if("serviceWorker"in navigator){if(new URL("/grocery-list",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/grocery-list","/service-worker.js");H?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(c){var n=c.headers.get("content-type");404===c.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):_(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):_(t,e)}))}}()}},[[36,1,2]]]);
//# sourceMappingURL=main.d05a0731.chunk.js.map