(this["webpackJsonpgrocery-list"]=this["webpackJsonpgrocery-list"]||[]).push([[0],{26:function(e,t,c){},36:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c.n(n),s=c(19),a=c.n(s),i=(c(26),c(4)),l=c(10),o=c(2),d=c(3),u=c(1);var j=function(e){var t=e.children,c=e.clickHandler,n=e.type,r=c,s="flex items-start px-2 py-2 font-semibold border rounded-sm shadow-sm";switch(void 0===n?"default":n){case"success":s+=" bg-green-500 border-green-600 text-gray-800";break;case"error":s+=" bg-red-500 border-red-600 text-gray-200";break;case"primary":s+=" bg-blue-500 border-blue-600 text-gray-200"}return Object(u.jsx)("button",{className:s,onClick:r,children:null!==t&&void 0!==t?t:"Click"})},b=function(e,t){Object(n.useEffect)((function(){return document.addEventListener("mousedown",(function(c){e.current&&!e.current.contains(c.target)&&t()})),function(){document.removeEventListener("mousedown",(function(c){return function(c){e.current&&!e.current.contains(c.target)&&t()}(c)}))}}),[e,t])};var m=function(e){var t=e.children,c=e.modalTitle,r=void 0===c?"Modal Title":c,s=e.closeHandler,a=Object(n.useRef)(null);return b(a,s),Object(u.jsx)("div",{className:"absolute top-0 right-0 bottom-0 left-0 pt-10",style:{backgroundColor:"rgba(0,0,0,.4"},children:Object(u.jsxs)("div",{ref:a,className:"bg-gray-300 w-5/6 mx-auto py-2 px-3 shadow-lg rounded-sm border-gray-400 border",children:[Object(u.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[Object(u.jsx)("p",{className:"font-bold",children:r}),Object(u.jsx)(d.h,{className:"w-5",onClick:function(){return s()}})]}),t]})})};var f=function(e){var t=e.closeHandler,c=e.addListHandler,r=Object(n.useState)(""),s=Object(i.a)(r,2),a=s[0],l=s[1],o=Object(n.useState)(""),d=Object(i.a)(o,2),b=d[0],f=d[1];function O(e){e.preventDefault(),a?(c(a),t()):f("Please enter a name")}var x=Object(n.useRef)(null);return Object(n.useEffect)((function(){null!==x.current&&x.current.focus()}),[]),Object(u.jsxs)(m,{closeHandler:t,modalTitle:"Start new list",children:[b&&Object(u.jsx)("div",{className:"px-2 py-1 mb-2 text-gray-50 bg-red-400",children:b}),Object(u.jsxs)("form",{onSubmit:O,children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"list_name",children:"List Name: "}),Object(u.jsx)("input",{ref:x,id:"list_name",defaultValue:a,onChange:function(e){return l(e.target.value)},className:"border border-gray-400 p-1 rounded-sm",type:"text"})]}),Object(u.jsx)("div",{className:"flex justify-end mt-6",children:Object(u.jsx)(j,{type:"success",clickHandler:O,children:"Start List"})})]})]})};var O=function(e){var t=e.lists,c=e.deleteListHandler;return Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{className:"font-bold text-lg mt-4",children:t.length>0?"Current Lists":"No Lists Yet"}),t.map((function(e,t){return Object(u.jsxs)("div",{className:"flex justify-between items-center px-1 mb-8",children:[Object(u.jsx)("p",{children:e.name}),Object(u.jsxs)("div",{className:"flex space-x-2",children:[Object(u.jsx)(j,{type:"error",clickHandler:function(){return c(e.id)},children:Object(u.jsx)(d.g,{className:"w-6"})}),Object(u.jsx)(l.b,{to:"/lists/".concat(e.id),children:Object(u.jsx)(j,{type:"primary",children:Object(u.jsx)(d.c,{className:"w-6"})})}),Object(u.jsx)(l.b,{to:"/lists/shop/".concat(e.id),children:Object(u.jsx)(j,{type:"success",children:Object(u.jsx)(d.f,{className:"w-6"})})})]})]},"glist_".concat(t))}))]})},x=c(12);var h,g=function(e){var t,c,r=e.listCategories,s=e.listId,a=e.listItem,l=e.deleteHandler,o=e.updateHandler,b=Object(n.useState)(null!==(t=a.item)&&void 0!==t?t:""),m=Object(i.a)(b,2),f=m[0],O=m[1],x=Object(n.useState)(null!==(c=a.category)&&void 0!==c?c:"Miscellaneous"),h=Object(i.a)(x,2),g=h[0],v=h[1];return Object(u.jsxs)("div",{className:"flex flex-col mb-2 item-row",children:[Object(u.jsx)("div",{className:"flex mb-2",children:Object(u.jsxs)("div",{className:"w-full",children:[Object(u.jsx)("label",{className:"font-bold",htmlFor:"item_".concat(a.id),children:"Item: "}),Object(u.jsx)("input",{id:"item_".concat(a.id),defaultValue:f,onChange:function(e){return t=e.target.value,O(t),void o(s,{id:a.id,item:t,category:g,acquired:a.acquired});var t},className:"border border-gray-400 p-1 mt-1 rounded-sm w-full",type:"text"})]})}),Object(u.jsxs)("div",{className:"flex justify-between space-x-2",children:[Object(u.jsx)("div",{className:"text-sm",children:Object(u.jsx)("select",{name:"category_".concat(a.id),id:"category_".concat(a.id),className:"border bg-gray-100 border-gray-400 p-1 mt-1 rounded-sm",onChange:function(e){return t=e.target.value,v(t),void o(s,{id:a.id,item:f,category:t,acquired:a.acquired});var t},value:g,children:r.map((function(e,t){return Object(u.jsx)("option",{value:e,children:e},"".concat(e,"_").concat(t))}))})}),Object(u.jsx)(j,{type:"error",clickHandler:function(){return l(a.id)},children:Object(u.jsx)(d.g,{className:"w-5"})})]})]})},v=c(9);!function(e){e.Dairy="Dairy",e.DryCanGoods="Dry/Can Goods",e.Frozen="Frozen",e.Pantry="Pantry",e.Produce="Produce",e.Meat="Meat",e.Miscellaneous="Miscellaneous"}(h||(h={}));var p=function(){var e=Object.keys(localStorage).filter((function(e){return e.includes("list_")}));return 0===e.length?[]:e.map((function(e){var t,c=null!==(t=localStorage.getItem(e))&&void 0!==t?t:"{}";return JSON.parse(c)})).sort((function(e,t){return e.id-t.id}))},y=function(e){var t,c=null!==(t=localStorage.getItem("list_".concat(e)))&&void 0!==t?t:"{}";return JSON.parse(c)},N=function(e,t){var c=y(e),n=Object(v.a)(Object(v.a)({},c),t);return n.name=t.name||c.name,n.items=t.items||c.items,localStorage.setItem("list_".concat(c.id),JSON.stringify(n)),n},w={addList:function(e){var t=p(),c=1;t.length>0&&(c=t.map((function(e){return e.id})).sort().splice(-1,1)[0]+1);var n={id:c,name:e,items:[]};return localStorage.setItem("list_".concat(c),JSON.stringify(n)),p()},getLists:p,getList:y,removeListItem:function(e,t){var c=y(e),n=Object(x.a)(c.items);return c.items=n.filter((function(e){return e.id!==t})),N(e,Object(v.a)({},c))},addNewListItem:function(e){var t=y(e),c=Object(x.a)(t.items);return c.push({id:c.length+1,item:"",acquired:!1,category:h.Miscellaneous}),t.items=c,N(e,Object(v.a)({},t))},updateListItem:function(e,t){var c=y(e),n=Object(x.a)(c.items),r=n.findIndex((function(e){return e.id===t.id}));return n[r]=Object(v.a)(Object(v.a)({},n[r]),t),c.items=n,localStorage.setItem("list_".concat(c.id),JSON.stringify(c)),c},updateList:N,clearLists:function(){localStorage.clear()},removeList:function(e){return localStorage.removeItem("list_".concat(e)),p()}},S={getCategories:function(){var e=[];for(var t in h)e.push(t);return e}};var L=function(){var e=Object(o.f)().id,t=parseInt(e),c=Object(n.useState)(w.getList(t)),r=Object(i.a)(c,2),s=r[0],a=r[1],b=Object(n.useState)([]),m=Object(i.a)(b,2),f=m[0],O=m[1],h=Object(n.useState)(S.getCategories()),v=Object(i.a)(h,1)[0];if(Object(n.useEffect)((function(){s&&O(Object(x.a)(s.items))}),[s]),Object(n.useEffect)((function(){if(f.length>1){var e=document.querySelector(".item-row:last-child");e&&e.scrollIntoView({behavior:"smooth"})}}),[f]),!s)return null;function p(e){var c=w.removeListItem(t,e);a(c),O(c.items)}function y(e,t){var c=w.updateListItem(e,t);a(c),O(c.items)}return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"flex items-center",children:[Object(u.jsx)("div",{className:"w-1/6",children:Object(u.jsx)(l.b,{to:"/",children:Object(u.jsx)(d.b,{className:"w-6"})})}),Object(u.jsx)("p",{className:"font-bold text-xl flex-1",children:s.name})]}),Object(u.jsxs)("div",{className:"flex flex-col mt-5 mb-12 item-list",children:[0===f.length&&Object(u.jsx)("p",{className:"mt-5",children:"No items yet."}),f.map((function(e,c){return Object(u.jsx)(g,{listCategories:v,listId:t,updateHandler:y,deleteHandler:p,listItem:e},"list_item_".concat(c))}))]}),Object(u.jsxs)("div",{className:"flex mt-8 justify-between fixed bottom-2 right-2 left-2",children:[Object(u.jsx)(j,{type:"primary",clickHandler:function(){document.body.scrollIntoView({behavior:"smooth"})},children:Object(u.jsx)(d.a,{className:"w-5"})}),Object(u.jsxs)(j,{type:"success",clickHandler:function(){var e=w.addNewListItem(t);a(e),O(e.items)},children:[Object(u.jsx)(d.d,{className:"w-5"})," Add Item"]})]})]})};var k=function(e){var t,c=e.listId,r=e.listItem,s=e.updateHandler,a=Object(n.useState)(null!==r&&void 0!==r?r:""),l=Object(i.a)(a,2),o=l[0],b=l[1],m=Object(n.useState)(null!==(t=o.acquired)&&void 0!==t&&t),f=Object(i.a)(m,2),O=f[0],x=f[1],h={textDecoration:O?"line-through":null,fontStyle:O?"italic":null,color:O?"rgba(0,0,0,.5)":null};return Object(u.jsxs)("div",{className:"flex items-center space-x-3 mb-4",style:h,children:[Object(u.jsx)(j,{type:"primary",clickHandler:function(){return function(){var e=!O;x(e),b(Object(v.a)(Object(v.a)({},o),{},{acquired:e})),s(c,{id:r.id,acquired:e})}()},children:Object(u.jsx)(d.e,{className:"w-4"})}),Object(u.jsxs)("p",{children:[o.quantity," ",o.item]})]})};var I=function(){var e=Object(o.f)().id,t=parseInt(e),c=Object(n.useState)(w.getList(t)),r=Object(i.a)(c,2),s=r[0],a=r[1],j=Object(n.useState)([]),b=Object(i.a)(j,2),m=b[0],f=b[1],O=Object(n.useRef)(S.getCategories()),x=Object(n.useState)("all"),h=Object(i.a)(x,2),g=h[0],v=h[1],p=Object(n.useCallback)((function(e){return O.current.map((function(t){return{category:t,items:e.items.filter((function(e){return e.category===t}))}}))}),[O]);function y(e,t){var c=w.updateListItem(e,t);a(c);var n=p(c);f(n)}return Object(n.useEffect)((function(){if(s){var e=p(s);f(e)}}),[s,p]),Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"flex items-center",children:[Object(u.jsx)("div",{className:"w-1/6",children:Object(u.jsx)(l.b,{to:"/",children:Object(u.jsx)(d.b,{className:"w-6"})})}),Object(u.jsxs)("p",{className:"font-bold text-xl w-5/6",children:["Shopping ",s.name]})]}),Object(u.jsxs)("div",{className:"flex mt-4",children:[Object(u.jsx)("label",{className:"pr-2 font-bold",htmlFor:"categories",children:"Filter:"}),Object(u.jsxs)("select",{className:"bg-gray-200 shadow-sm py-1 pl-1",name:"categories",id:"categories",value:g,onChange:function(e){return v(e.target.value)},children:[Object(u.jsx)("option",{value:"all",children:"All"}),O.current.map((function(e,t){return Object(u.jsx)("option",{value:e,children:e},"category_".concat(t))}))]})]}),Object(u.jsxs)("div",{className:"flex flex-col mb-12 item-list",children:[0===m.length&&Object(u.jsx)("p",{className:"mt-5",children:"No items yet."}),m.map((function(t,c){return t.items.length>0&&Object(u.jsxs)("div",{className:"pb-6 ".concat(t.category===g||"all"===g?"flex flex-col":"hidden"),children:[Object(u.jsx)("p",{className:"font-bold text-right",children:t.category}),Object(u.jsx)("hr",{className:"border-gray-400 mb-2"}),t.items.map((function(t,c){return Object(u.jsx)(k,{listId:e,updateHandler:y,listItem:t},"list_item_".concat(c))}))]},"list_category_".concat(c))}))]})]})};var C=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),c=t[0],r=t[1],s=w.getLists(),a=Object(n.useState)(s),b=Object(i.a)(a,2),m=b[0],x=b[1];return Object(u.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-300",children:[Object(u.jsx)("header",{className:"w-full bg-gray-500 text-gray-50 py-3 px-2 h-12",children:Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsx)(d.f,{className:"w-5 mr-1"}),"Grocery List App"]})}),Object(u.jsx)("main",{className:"my-2 px-2 flex-1",children:Object(u.jsx)(l.a,{children:Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{exact:!0,path:"/lists/:id",children:Object(u.jsx)(L,{})}),Object(u.jsx)(o.a,{exact:!0,path:"/lists/shop/:id",children:Object(u.jsx)(I,{})}),Object(u.jsxs)(o.a,{path:"/",children:[Object(u.jsxs)("div",{className:"flex justify-between",children:[Object(u.jsxs)(j,{type:"success",clickHandler:function(){return r(!0)},children:[Object(u.jsx)(d.d,{className:"w-5"})," Create list"]}),Object(u.jsxs)(j,{type:"error",clickHandler:function(){return w.clearLists(),void x([])},children:[Object(u.jsx)(d.g,{className:"w-5"})," Clear All"]})]}),Object(u.jsx)(O,{lists:m,deleteListHandler:function(e){var t=w.removeList(e);x(t)}})]})]})})}),c&&Object(u.jsx)(f,{closeHandler:function(){return r(!1)},addListHandler:function(e){var t=w.addList(e);x(t)}})]})},H=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function _(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var c=e.installing;null!=c&&(c.onstatechange=function(){"installed"===c.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,37)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;c(e),n(e),r(e),s(e),a(e)}))};a.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(C,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/grocery-list",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/grocery-list","/service-worker.js");H?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(c){var n=c.headers.get("content-type");404===c.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):_(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):_(t,e)}))}}(),q()}},[[36,1,2]]]);
//# sourceMappingURL=main.82928821.chunk.js.map